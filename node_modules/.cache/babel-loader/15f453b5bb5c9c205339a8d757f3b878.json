{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport compose from 'recompose/compose';\nimport inflection from 'inflection';\nimport { parse } from 'query-string';\nimport withTranslate from '../i18n/translate';\nimport { crudCreate as crudCreateAction } from '../actions';\nimport checkMinimumRequiredProps from './checkMinimumRequiredProps';\n/**\n * Page component for the Create view\n *\n * The `<Create>` component renders the page title and actions.\n * It is not responsible for rendering the actual form -\n * that's the job of its child component (usually `<SimpleForm>`),\n * to which it passes pass the `record` as prop.\n *\n * The `<Create>` component accepts the following props:\n *\n * - title\n * - actions\n *\n * Both expect an element for value.\n *\n * @example\n *     // in src/posts.js\n *     import React from 'react';\n *     import { Create, SimpleForm, TextInput } from 'react-admin';\n *\n *     export const PostCreate = (props) => (\n *         <Create {...props}>\n *             <SimpleForm>\n *                 <TextInput source=\"title\" />\n *             </SimpleForm>\n *         </Create>\n *     );\n *\n *     // in src/App.js\n *     import React from 'react';\n *     import { Admin, Resource } from 'react-admin';\n *\n *     import { PostCreate } from './posts';\n *\n *     const App = () => (\n *         <Admin dataProvider={...}>\n *             <Resource name=\"posts\" create={PostCreate} />\n *         </Admin>\n *     );\n *     export default App;\n */\n\nvar UnconnectedCreateController =\n/** @class */\nfunction (_super) {\n  __extends(UnconnectedCreateController, _super);\n\n  function UnconnectedCreateController(props) {\n    var _this = _super.call(this, props) || this;\n\n    _this.save = function (record, redirect) {\n      _this.props.crudCreate(_this.props.resource, record, _this.props.basePath, redirect);\n    };\n\n    var _a = _this.props,\n        _b = _a.location,\n        state = _b.state,\n        search = _b.search,\n        record = _a.record;\n    _this.record = state && state.record ? state.record : search ? parse(search, {\n      arrayFormat: 'bracket'\n    }) : record;\n    return _this;\n  }\n\n  UnconnectedCreateController.prototype.defaultRedirectRoute = function () {\n    var _a = this.props,\n        hasShow = _a.hasShow,\n        hasEdit = _a.hasEdit;\n\n    if (hasEdit) {\n      return 'edit';\n    }\n\n    if (hasShow) {\n      return 'show';\n    }\n\n    return 'list';\n  };\n\n  UnconnectedCreateController.prototype.render = function () {\n    var _a = this.props,\n        basePath = _a.basePath,\n        children = _a.children,\n        isLoading = _a.isLoading,\n        resource = _a.resource,\n        translate = _a.translate;\n\n    if (!children) {\n      return null;\n    }\n\n    var resourceName = translate(\"resources.\" + resource + \".name\", {\n      smart_count: 1,\n      _: inflection.humanize(inflection.singularize(resource))\n    });\n    var defaultTitle = translate('ra.page.create', {\n      name: \"\" + resourceName\n    });\n    return children({\n      isLoading: isLoading,\n      defaultTitle: defaultTitle,\n      save: this.save,\n      resource: resource,\n      basePath: basePath,\n      record: this.record,\n      redirect: this.defaultRedirectRoute(),\n      translate: translate\n    });\n  };\n\n  UnconnectedCreateController.defaultProps = {\n    record: {}\n  };\n  return UnconnectedCreateController;\n}(Component);\n\nexport { UnconnectedCreateController };\n\nfunction mapStateToProps(state) {\n  return {\n    isLoading: state.admin.loading > 0\n  };\n}\n\nvar CreateController = compose(checkMinimumRequiredProps('Create', ['basePath', 'location', 'resource']), connect(mapStateToProps, {\n  crudCreate: crudCreateAction\n}), withTranslate)(UnconnectedCreateController);\nexport default CreateController;","map":null,"metadata":{},"sourceType":"module"}