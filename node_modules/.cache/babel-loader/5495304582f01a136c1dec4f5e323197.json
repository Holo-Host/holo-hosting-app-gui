{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar en_1 = require(\"faker/locale/en\");\n\nvar is_after_1 = __importDefault(require(\"date-fns/is_after\"));\n\nvar sub_days_1 = __importDefault(require(\"date-fns/sub_days\"));\n\nvar utils_1 = require(\"./utils\");\n\nexports.default = function (db, _a) {\n  var serializeDate = _a.serializeDate;\n  var today = new Date();\n  var aMonthAgo = sub_days_1.default(today, 30);\n  return Array.from(Array(600).keys()).map(function (id) {\n    var nbProducts = utils_1.weightedArrayElement([1, 2, 3, 4, 5, 6, 7, 8, 9, 10], [30, 20, 5, 2, 1, 1, 1, 1, 1, 1]);\n    var basket = Array.from(Array(nbProducts).keys()).map(function () {\n      return {\n        product_id: en_1.random.number({\n          min: 0,\n          max: 10 * 13 - 1\n        }),\n        quantity: utils_1.weightedArrayElement([1, 2, 3, 4, 5], [10, 5, 3, 2, 1])\n      };\n    });\n    var total_ex_taxes = basket.reduce(function (total, product) {\n      return total + db.products[product.product_id].price * product.quantity;\n    }, 0);\n    var delivery_fees = utils_1.randomFloat(3, 8);\n    var tax_rate = en_1.random.arrayElement([0.12, 0.17, 0.2]);\n    var taxes = parseFloat(((total_ex_taxes + delivery_fees) * tax_rate).toFixed(2));\n    var customer = en_1.random.arrayElement(db.customers.filter(function (customer) {\n      return customer.has_ordered;\n    }));\n    var date = utils_1.randomDate(customer.first_seen, customer.last_seen);\n    var status = is_after_1.default(date, aMonthAgo) && en_1.random.boolean() ? 'ordered' : utils_1.weightedArrayElement(['delivered', 'cancelled'], [10, 1]);\n    return {\n      id: id,\n      reference: en_1.random.alphaNumeric(6).toUpperCase(),\n      date: serializeDate ? date.toISOString() : date,\n      customer_id: customer.id,\n      basket: basket,\n      total_ex_taxes: total_ex_taxes,\n      delivery_fees: delivery_fees,\n      tax_rate: tax_rate,\n      taxes: taxes,\n      total: parseFloat((total_ex_taxes + delivery_fees + taxes).toFixed(2)),\n      status: status,\n      returned: status == 'delivered' ? utils_1.weightedBoolean(10) : false\n    };\n  });\n};","map":null,"metadata":{},"sourceType":"script"}