{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) {\n        if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport merge from 'lodash/merge';\nimport buildDataProvider from 'ra-data-graphql';\nimport { DELETE, DELETE_MANY, UPDATE, UPDATE_MANY } from 'ra-core';\nimport defaultBuildQuery from './buildQuery';\nvar defaultOptions = {\n  buildQuery: defaultBuildQuery\n};\nexport var buildQuery = defaultBuildQuery;\nexport default (function (options) {\n  return buildDataProvider(merge({}, defaultOptions, options)).then(function (defaultDataProvider) {\n    return function (fetchType, resource, params) {\n      // This provider does not support multiple deletions so instead we send multiple DELETE requests\n      // This can be optimized using the apollo-link-batch-http link\n      if (fetchType === DELETE_MANY) {\n        var ids = params.ids,\n            otherParams_1 = __rest(params, [\"ids\"]);\n\n        return Promise.all(ids.map(function (id) {\n          return defaultDataProvider(DELETE, resource, __assign({\n            id: id\n          }, otherParams_1));\n        })).then(function (results) {\n          var data = results.reduce(function (acc, _a) {\n            var data = _a.data;\n            return acc.concat([data.id]);\n          }, []);\n          return {\n            data: data\n          };\n        });\n      } // This provider does not support multiple deletions so instead we send multiple UPDATE requests\n      // This can be optimized using the apollo-link-batch-http link\n\n\n      if (fetchType === UPDATE_MANY) {\n        var ids = params.ids,\n            data_1 = params.data,\n            otherParams_2 = __rest(params, [\"ids\", \"data\"]);\n\n        return Promise.all(ids.map(function (id) {\n          return defaultDataProvider(UPDATE, resource, __assign({\n            data: __assign({\n              id: id\n            }, data_1)\n          }, otherParams_2));\n        })).then(function (results) {\n          var data = results.reduce(function (acc, _a) {\n            var data = _a.data;\n            return acc.concat([data.id]);\n          }, []);\n          return {\n            data: data\n          };\n        });\n      }\n\n      return defaultDataProvider(fetchType, resource, params);\n    };\n  });\n});","map":null,"metadata":{},"sourceType":"module"}