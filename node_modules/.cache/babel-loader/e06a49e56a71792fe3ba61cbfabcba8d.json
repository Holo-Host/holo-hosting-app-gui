{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { Component } from 'react';\nimport withDataProvider from './withDataProvider';\n/**\n * Fetch the data provider and pass the result to a child function\n *\n * @example\n *\n * const UserProfile = ({ record }) => (\n *     <Query type=\"GET_ONE\" resource=\"users\" payload={{ id: record.id }}>\n *         {({ data, loading, error }) => {\n *             if (loading) { return <Loading />; }\n *             if (error) { return <p>ERROR</p>; }\n *             return <div>User {data.username}</div>;\n *         }}\n *     </Query>\n * );\n */\n\nvar Query =\n/** @class */\nfunction (_super) {\n  __extends(Query, _super);\n\n  function Query() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.state = {\n      data: null,\n      loading: true,\n      error: null\n    };\n\n    _this.componentDidMount = function () {\n      var _a = _this.props,\n          dataProvider = _a.dataProvider,\n          type = _a.type,\n          resource = _a.resource,\n          payload = _a.payload,\n          options = _a.options;\n      dataProvider(type, resource, payload, options).then(function (_a) {\n        var data = _a.data;\n\n        _this.setState({\n          data: data,\n          loading: false\n        });\n      }).catch(function (error) {\n        _this.setState({\n          error: error,\n          loading: false\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  Query.prototype.render = function () {\n    var children = this.props.children;\n    return children(this.state);\n  };\n\n  return Query;\n}(Component);\n\nexport default withDataProvider(Query);","map":null,"metadata":{},"sourceType":"module"}