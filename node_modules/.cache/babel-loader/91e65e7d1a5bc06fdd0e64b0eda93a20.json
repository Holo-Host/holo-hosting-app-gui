{"ast":null,"code":"import _classCallCheck from \"/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/src/orders/Basket.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Link, translate, crudGetMany as crudGetManyAction } from 'react-admin';\nimport compose from 'recompose/compose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nvar styles = {\n  container: {\n    minWidth: '35em',\n    marginLeft: '1em'\n  },\n  rightAlignedCell: {\n    textAlign: 'right'\n  },\n  boldCell: {\n    fontWeight: 'bold'\n  }\n};\n\nvar Basket =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Basket, _Component);\n\n  function Basket() {\n    _classCallCheck(this, Basket);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(Basket).apply(this, arguments));\n  }\n\n  _createClass(Basket, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"fetchData\",\n    value: function fetchData() {\n      var _this$props = this.props,\n          basket = _this$props.record.basket,\n          crudGetMany = _this$props.crudGetMany;\n      crudGetMany('products', basket.map(function (item) {\n        return item.product_id;\n      }));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          classes = _this$props2.classes,\n          record = _this$props2.record,\n          products = _this$props2.products,\n          translate = _this$props2.translate;\n      if (!record) return null;\n      var basket = record.basket;\n      return React.createElement(Paper, {\n        className: classes.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 37\n        },\n        __self: this\n      }, React.createElement(Table, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 38\n        },\n        __self: this\n      }, React.createElement(TableHead, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 40\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.reference')), React.createElement(TableCell, {\n        className: classes.rightAlignedCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.unit_price')), React.createElement(TableCell, {\n        className: classes.rightAlignedCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.quantity')), React.createElement(TableCell, {\n        className: classes.rightAlignedCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.total')))), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, basket.map(function (item) {\n        return products[item.product_id] && React.createElement(TableRow, {\n          key: item.product_id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 68\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/products/\".concat(item.product_id),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }, products[item.product_id].reference)), React.createElement(TableCell, {\n          className: classes.rightAlignedCell,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, products[item.product_id].price.toLocaleString(undefined, {\n          style: 'currency',\n          currency: 'USD'\n        })), React.createElement(TableCell, {\n          className: classes.rightAlignedCell,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, item.quantity), React.createElement(TableCell, {\n          className: classes.rightAlignedCell,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, (products[item.product_id].price * item.quantity).toLocaleString(undefined, {\n          style: 'currency',\n          currency: 'USD'\n        })));\n      }), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        colSpan: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110\n        },\n        __self: this\n      }), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.sum')), React.createElement(TableCell, {\n        className: classes.rightAlignedCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, record.total_ex_taxes.toLocaleString(undefined, {\n        style: 'currency',\n        currency: 'USD'\n      }))), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        colSpan: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.delivery')), React.createElement(TableCell, {\n        className: classes.rightAlignedCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, record.delivery_fees.toLocaleString(undefined, {\n        style: 'currency',\n        currency: 'USD'\n      }))), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        colSpan: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }), React.createElement(TableCell, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.tax_rate')), React.createElement(TableCell, {\n        className: classes.rightAlignedCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, record.tax_rate.toLocaleString(undefined, {\n        style: 'percent'\n      }))), React.createElement(TableRow, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(TableCell, {\n        colSpan: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }), React.createElement(TableCell, {\n        className: classes.boldCell,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, translate('resources.commands.fields.basket.total')), React.createElement(TableCell, {\n        className: classnames(classes.boldCell, classes.rightAlignedCell),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, record.total.toLocaleString(undefined, {\n        style: 'currency',\n        currency: 'USD'\n      }))))));\n    }\n  }]);\n\n  return Basket;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state, props) {\n  var basket = props.record.basket;\n  var productIds = basket.map(function (item) {\n    return item.product_id;\n  });\n  return {\n    products: productIds.map(function (productId) {\n      return state.admin.resources.products.data[productId];\n    }).filter(function (r) {\n      return typeof r !== 'undefined';\n    }).reduce(function (prev, next) {\n      prev[next.id] = next;\n      return prev;\n    }, {})\n  };\n};\n\nvar enhance = compose(translate, withStyles(styles), connect(mapStateToProps, {\n  crudGetMany: crudGetManyAction\n}));\nexport default enhance(Basket);","map":{"version":3,"sources":["/home/lisa/Documents/gitrepos/holochain/holo/holo-hosting/No2_holo-hosting-app_GUI/holo-hosting-app_GUI/src/orders/Basket.js"],"names":["React","Component","connect","classnames","Table","TableBody","TableCell","TableHead","TableRow","Paper","Link","translate","crudGetMany","crudGetManyAction","compose","withStyles","styles","container","minWidth","marginLeft","rightAlignedCell","textAlign","boldCell","fontWeight","Basket","fetchData","props","basket","record","map","item","product_id","classes","products","reference","price","toLocaleString","undefined","style","currency","quantity","total_ex_taxes","delivery_fees","tax_rate","total","mapStateToProps","state","productIds","productId","admin","resources","data","filter","r","reduce","prev","next","id","enhance"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,SAAP,MAAsB,6BAAtB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,SAASC,IAAT,EAAeC,SAAf,EAA0BC,WAAW,IAAIC,iBAAzC,QAAkE,aAAlE;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AAEA,IAAMC,MAAM,GAAG;AACXC,EAAAA,SAAS,EAAE;AAAEC,IAAAA,QAAQ,EAAE,MAAZ;AAAoBC,IAAAA,UAAU,EAAE;AAAhC,GADA;AAEXC,EAAAA,gBAAgB,EAAE;AAAEC,IAAAA,SAAS,EAAE;AAAb,GAFP;AAGXC,EAAAA,QAAQ,EAAE;AAAEC,IAAAA,UAAU,EAAE;AAAd;AAHC,CAAf;;IAMMC,M;;;;;;;;;;;;;wCACkB;AAChB,WAAKC,SAAL;AACH;;;gCACW;AAAA,wBAIJ,KAAKC,KAJD;AAAA,UAEMC,MAFN,eAEJC,MAFI,CAEMD,MAFN;AAAA,UAGJf,WAHI,eAGJA,WAHI;AAKRA,MAAAA,WAAW,CAAC,UAAD,EAAae,MAAM,CAACE,GAAP,CAAW,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACC,UAAT;AAAA,OAAf,CAAb,CAAX;AACH;;;6BACQ;AAAA,yBAC4C,KAAKL,KADjD;AAAA,UACGM,OADH,gBACGA,OADH;AAAA,UACYJ,MADZ,gBACYA,MADZ;AAAA,UACoBK,QADpB,gBACoBA,QADpB;AAAA,UAC8BtB,SAD9B,gBAC8BA,SAD9B;AAEL,UAAI,CAACiB,MAAL,EAAa,OAAO,IAAP;AAFR,UAGGD,MAHH,GAGcC,MAHd,CAGGD,MAHH;AAIL,aACI,oBAAC,KAAD;AAAO,QAAA,SAAS,EAAEK,OAAO,CAACf,SAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKN,SAAS,CACN,4CADM,CADd,CADJ,EAMI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEqB,OAAO,CAACZ,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKT,SAAS,CACN,6CADM,CADd,CANJ,EAWI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEqB,OAAO,CAACZ,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKT,SAAS,CACN,2CADM,CADd,CAXJ,EAgBI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEqB,OAAO,CAACZ,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKT,SAAS,CACN,wCADM,CADd,CAhBJ,CADJ,CADJ,EAyBI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKgB,MAAM,CAACE,GAAP,CACG,UAAAC,IAAI;AAAA,eACAG,QAAQ,CAACH,IAAI,CAACC,UAAN,CAAR,IACI,oBAAC,QAAD;AAAU,UAAA,GAAG,EAAED,IAAI,CAACC,UAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACI,oBAAC,IAAD;AACI,UAAA,EAAE,sBACED,IAAI,CAACC,UADP,CADN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAMQE,QAAQ,CAACH,IAAI,CAACC,UAAN,CAAR,CACKG,SAPb,CADJ,CADJ,EAaI,oBAAC,SAAD;AACI,UAAA,SAAS,EAAEF,OAAO,CAACZ,gBADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAGKa,QAAQ,CACLH,IAAI,CAACC,UADA,CAAR,CAECI,KAFD,CAEOC,cAFP,CAEsBC,SAFtB,EAEiC;AAC9BC,UAAAA,KAAK,EAAE,UADuB;AAE9BC,UAAAA,QAAQ,EAAE;AAFoB,SAFjC,CAHL,CAbJ,EAuBI,oBAAC,SAAD;AACI,UAAA,SAAS,EAAEP,OAAO,CAACZ,gBADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAGKU,IAAI,CAACU,QAHV,CAvBJ,EA4BI,oBAAC,SAAD;AACI,UAAA,SAAS,EAAER,OAAO,CAACZ,gBADvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAGK,CACGa,QAAQ,CAACH,IAAI,CAACC,UAAN,CAAR,CACKI,KADL,GACaL,IAAI,CAACU,QAFrB,EAGCJ,cAHD,CAGgBC,SAHhB,EAG2B;AACxBC,UAAAA,KAAK,EAAE,UADiB;AAExBC,UAAAA,QAAQ,EAAE;AAFc,SAH3B,CAHL,CA5BJ,CAFJ;AAAA,OADP,CADL,EA8CI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAE,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK5B,SAAS,CACN,sCADM,CADd,CAFJ,EAOI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEqB,OAAO,CAACZ,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKQ,MAAM,CAACa,cAAP,CAAsBL,cAAtB,CACGC,SADH,EAEG;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBC,QAAAA,QAAQ,EAAE;AAA/B,OAFH,CADL,CAPJ,CA9CJ,EA4DI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAE,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK5B,SAAS,CACN,2CADM,CADd,CAFJ,EAOI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEqB,OAAO,CAACZ,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKQ,MAAM,CAACc,aAAP,CAAqBN,cAArB,CACGC,SADH,EAEG;AAAEC,QAAAA,KAAK,EAAE,UAAT;AAAqBC,QAAAA,QAAQ,EAAE;AAA/B,OAFH,CADL,CAPJ,CA5DJ,EA0EI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAE,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK5B,SAAS,CACN,2CADM,CADd,CAFJ,EAOI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEqB,OAAO,CAACZ,gBAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKQ,MAAM,CAACe,QAAP,CAAgBP,cAAhB,CAA+BC,SAA/B,EAA0C;AACvCC,QAAAA,KAAK,EAAE;AADgC,OAA1C,CADL,CAPJ,CA1EJ,EAuFI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACI,oBAAC,SAAD;AAAW,QAAA,OAAO,EAAE,CAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,EAEI,oBAAC,SAAD;AAAW,QAAA,SAAS,EAAEN,OAAO,CAACV,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKX,SAAS,CACN,wCADM,CADd,CAFJ,EAOI,oBAAC,SAAD;AACI,QAAA,SAAS,EAAER,UAAU,CACjB6B,OAAO,CAACV,QADS,EAEjBU,OAAO,CAACZ,gBAFS,CADzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMKQ,MAAM,CAACgB,KAAP,CAAaR,cAAb,CAA4BC,SAA5B,EAAuC;AACpCC,QAAAA,KAAK,EAAE,UAD6B;AAEpCC,QAAAA,QAAQ,EAAE;AAF0B,OAAvC,CANL,CAPJ,CAvFJ,CAzBJ,CADJ,CADJ;AAyIH;;;;EAxJgBtC,S;;AA2JrB,IAAM4C,eAAe,GAAG,SAAlBA,eAAkB,CAACC,KAAD,EAAQpB,KAAR,EAAkB;AAAA,MAExBC,MAFwB,GAGlCD,KAHkC,CAElCE,MAFkC,CAExBD,MAFwB;AAItC,MAAMoB,UAAU,GAAGpB,MAAM,CAACE,GAAP,CAAW,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,UAAT;AAAA,GAAf,CAAnB;AACA,SAAO;AACHE,IAAAA,QAAQ,EAAEc,UAAU,CACflB,GADK,CACD,UAAAmB,SAAS;AAAA,aAAIF,KAAK,CAACG,KAAN,CAAYC,SAAZ,CAAsBjB,QAAtB,CAA+BkB,IAA/B,CAAoCH,SAApC,CAAJ;AAAA,KADR,EAELI,MAFK,CAEE,UAAAC,CAAC;AAAA,aAAI,OAAOA,CAAP,KAAa,WAAjB;AAAA,KAFH,EAGLC,MAHK,CAGE,UAACC,IAAD,EAAOC,IAAP,EAAgB;AACpBD,MAAAA,IAAI,CAACC,IAAI,CAACC,EAAN,CAAJ,GAAgBD,IAAhB;AACA,aAAOD,IAAP;AACH,KANK,EAMH,EANG;AADP,GAAP;AASH,CAdD;;AAgBA,IAAMG,OAAO,GAAG5C,OAAO,CACnBH,SADmB,EAEnBI,UAAU,CAACC,MAAD,CAFS,EAGnBd,OAAO,CACH2C,eADG,EAEH;AACIjC,EAAAA,WAAW,EAAEC;AADjB,CAFG,CAHY,CAAvB;AAWA,eAAe6C,OAAO,CAAClC,MAAD,CAAtB","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classnames from 'classnames';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Paper from '@material-ui/core/Paper';\nimport { Link, translate, crudGetMany as crudGetManyAction } from 'react-admin';\nimport compose from 'recompose/compose';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = {\n    container: { minWidth: '35em', marginLeft: '1em' },\n    rightAlignedCell: { textAlign: 'right' },\n    boldCell: { fontWeight: 'bold' },\n};\n\nclass Basket extends Component {\n    componentDidMount() {\n        this.fetchData();\n    }\n    fetchData() {\n        const {\n            record: { basket },\n            crudGetMany,\n        } = this.props;\n        crudGetMany('products', basket.map(item => item.product_id));\n    }\n    render() {\n        const { classes, record, products, translate } = this.props;\n        if (!record) return null;\n        const { basket } = record;\n        return (\n            <Paper className={classes.container}>\n                <Table>\n                    <TableHead>\n                        <TableRow>\n                            <TableCell>\n                                {translate(\n                                    'resources.commands.fields.basket.reference'\n                                )}\n                            </TableCell>\n                            <TableCell className={classes.rightAlignedCell}>\n                                {translate(\n                                    'resources.commands.fields.basket.unit_price'\n                                )}\n                            </TableCell>\n                            <TableCell className={classes.rightAlignedCell}>\n                                {translate(\n                                    'resources.commands.fields.basket.quantity'\n                                )}\n                            </TableCell>\n                            <TableCell className={classes.rightAlignedCell}>\n                                {translate(\n                                    'resources.commands.fields.basket.total'\n                                )}\n                            </TableCell>\n                        </TableRow>\n                    </TableHead>\n                    <TableBody>\n                        {basket.map(\n                            item =>\n                                products[item.product_id] && (\n                                    <TableRow key={item.product_id}>\n                                        <TableCell>\n                                            <Link\n                                                to={`/products/${\n                                                    item.product_id\n                                                }`}\n                                            >\n                                                {\n                                                    products[item.product_id]\n                                                        .reference\n                                                }\n                                            </Link>\n                                        </TableCell>\n                                        <TableCell\n                                            className={classes.rightAlignedCell}\n                                        >\n                                            {products[\n                                                item.product_id\n                                            ].price.toLocaleString(undefined, {\n                                                style: 'currency',\n                                                currency: 'USD',\n                                            })}\n                                        </TableCell>\n                                        <TableCell\n                                            className={classes.rightAlignedCell}\n                                        >\n                                            {item.quantity}\n                                        </TableCell>\n                                        <TableCell\n                                            className={classes.rightAlignedCell}\n                                        >\n                                            {(\n                                                products[item.product_id]\n                                                    .price * item.quantity\n                                            ).toLocaleString(undefined, {\n                                                style: 'currency',\n                                                currency: 'USD',\n                                            })}\n                                        </TableCell>\n                                    </TableRow>\n                                )\n                        )}\n                        <TableRow>\n                            <TableCell colSpan={2} />\n                            <TableCell>\n                                {translate(\n                                    'resources.commands.fields.basket.sum'\n                                )}\n                            </TableCell>\n                            <TableCell className={classes.rightAlignedCell}>\n                                {record.total_ex_taxes.toLocaleString(\n                                    undefined,\n                                    { style: 'currency', currency: 'USD' }\n                                )}\n                            </TableCell>\n                        </TableRow>\n                        <TableRow>\n                            <TableCell colSpan={2} />\n                            <TableCell>\n                                {translate(\n                                    'resources.commands.fields.basket.delivery'\n                                )}\n                            </TableCell>\n                            <TableCell className={classes.rightAlignedCell}>\n                                {record.delivery_fees.toLocaleString(\n                                    undefined,\n                                    { style: 'currency', currency: 'USD' }\n                                )}\n                            </TableCell>\n                        </TableRow>\n                        <TableRow>\n                            <TableCell colSpan={2} />\n                            <TableCell>\n                                {translate(\n                                    'resources.commands.fields.basket.tax_rate'\n                                )}\n                            </TableCell>\n                            <TableCell className={classes.rightAlignedCell}>\n                                {record.tax_rate.toLocaleString(undefined, {\n                                    style: 'percent',\n                                })}\n                            </TableCell>\n                        </TableRow>\n                        <TableRow>\n                            <TableCell colSpan={2} />\n                            <TableCell className={classes.boldCell}>\n                                {translate(\n                                    'resources.commands.fields.basket.total'\n                                )}\n                            </TableCell>\n                            <TableCell\n                                className={classnames(\n                                    classes.boldCell,\n                                    classes.rightAlignedCell\n                                )}\n                            >\n                                {record.total.toLocaleString(undefined, {\n                                    style: 'currency',\n                                    currency: 'USD',\n                                })}\n                            </TableCell>\n                        </TableRow>\n                    </TableBody>\n                </Table>\n            </Paper>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    const {\n        record: { basket },\n    } = props;\n    const productIds = basket.map(item => item.product_id);\n    return {\n        products: productIds\n            .map(productId => state.admin.resources.products.data[productId])\n            .filter(r => typeof r !== 'undefined')\n            .reduce((prev, next) => {\n                prev[next.id] = next;\n                return prev;\n            }, {}),\n    };\n};\n\nconst enhance = compose(\n    translate,\n    withStyles(styles),\n    connect(\n        mapStateToProps,\n        {\n            crudGetMany: crudGetManyAction,\n        }\n    )\n);\n\nexport default enhance(Basket);\n"]},"metadata":{},"sourceType":"module"}